<%- include('../partials/layout-start') %> <% if (message) { %>
<div id="success-message" class="alert alert-success"><%= message %></div>
<% } %>

<div class="container book-container">
  <h1>Book List</h1>
  <a href="/books/create" class="btn btn-primary mb-3">Add Book</a>
  <ul class="list-group">
    <% books.forEach(book => { %>
    <li class="list-group-item">
      <a href="/books/<%= book.id %>"><%= book.title %></a>
    </li>
    <% }) %>
  </ul>
</div>

<script>
  setTimeout(() => {
    const messageElement = document.getElementById('success-message');
    if (messageElement) {
      messageElement.style.display = 'none';
      const newUrl = window.location.href.split('?')[0];
      window.history.replaceState(null, null, newUrl);
    }
  }, 3000);
</script>

<%- include('../partials/layout-end') %>
